/**
 * RiojaWall v1
 *
 * Copyright 2016, Gerard Rodes https://github.com/GerardRodes
 *
 * Released under the MIT license - http://opensource.org/licenses/MIT
 */
!function(a){const b={itemSelector:".item",cols:4,animation:!1,transition:"1.75s ease-in-out"};a.fn.extend({riojaWall:function(d){var e=a.extend({},b,d);if(this.length>1){var f=[];return this.each(function(){f.push(c(this,e))}),f}return c(this,e)}});var c=function(a,b){var c=new d(a,b);return c.init(),c},d=function(b,c){var d=this;d.container=a(b),d.items=d.container.find(c.itemSelector),d.cols=[],d.allImages=d.container.find("img"),d.loadedImages=0,d.init=function(){d.container.css("position","relative"),d.loadCols()},d.loadCols=function(){for(var a=0;a<c.cols;a++){var b=d.items.filter(function(b,d,e){return(b-a)%c.cols==0});d.cols.push(new e(a,b,d.container.width()/c.cols))}},d.allImages.on("load",function(){if(d.loadedImages++,d.loadedImages==d.allImages.length)for(var b=!0;b;){b=!1;var c=d.cols.sort(function(a,b){return a.height<b.height});a.each(c,function(a,c){var e=c.items.last()[0],f=c.height-e.element.height(),g=d.cols.filter(function(a){return f>a.height}).sort(function(a,b){return a.height>b.height});g.length>0&&(g[0].items.push(c.popItem()),c.arrangeItems(),g[0].arrangeItems(),b=!0)})}}),c.animation&&d.items.css("transition",c.transition)},e=function(b,c,d){var e=this;e.index=b,e.items=c.map(function(a,b){return new f(b,a)}),e.width=d,e.height=0,e.init=function(){e.arrangeItems()},e.popItem=function(){var a=e.items.slice(-1)[0];return e.items=e.items.slice(0,e.items.length-1),a},e.arrangeItems=function(){a.each(e.items,function(a,b){var c=e.items.slice(0,a),d=0;c.each(function(a,b){d+=b.element.height()}),b.element.css({position:"absolute",width:e.width,left:e.width*e.index,top:d})}),e.height=0,e.items.map(function(a,b){e.height+=b.element.height()})},e.items.each(function(a,b){b.element.find("img").on("load",e.arrangeItems)}),e.init()},f=function(b,c){var d=this;d.element=a(b),d.depth=c}}(jQuery);
